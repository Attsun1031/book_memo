# テストの可読性
## 可読性を損なう可能性のある問題
* テスト名が、個々のテストケースのポイントや他のテストケースとの違いについてきちんと説明できていない
* 一つのテストケースが複数のフィーチャーを実行している
* 様々な仕組みでテストしているため、ざっと眺めただけではテストの意図をつかみにくい
* テストのセットアップや例外処理のためのコードが大量にあり、本質的なロジックが埋もれてしまっている
* テストの中でリテラル値（マジックナンバー）が使われており、その値の何が重要なのかがはっきりしない

## フィーチャーを表すテスト名
### ダメな例
* `test1`などの何も意味しない名前
* メソッド名がそのままテスト名になっており、何をテストしているか不明

### 命名のコツ
知りたいのは、テスト対象にどんなメソッドがあるかではなく、そのオブジェクトが様々な状況で何を行うのか、そのメソッドが何のために存在するか。

### TestDox規約
テスト対象のクラスを暗黙の主語として、テスト名を一つの文として読めるようにする。

例：

* Listは、追加された順にアイテムを保持する
* Listは、複数の参照を同一アイテムに保持できる
* Listは、保持していないアイテムを削除しようとすると例外を投げる

主語を除いた部分をメソッド名にする。

## テストコードの合理化
すべてのコードは「どうやって」よりも「何を」を強調すべき。

### 構造化による説明
「意図を表現するための細かいメソッド」を積極的に使う。  
例えば以下のようにアサート部分を書けると良い。

	asertThat(instruments, hasItem(instrumentsWithPrice(greaterThan(81))))

### 構造化による共有
テストコードで共通部分があれば抜き出したほうが良いが、テストコードが抽象的になって読みにくくなる場合は避ける。  
テストコードは対象コードの動きをきちんと説明できるようになっていること。

### 従属オブジェクトへの委譲
ヘルパーメソッドでは間に合わないような複雑なデータ構造が必要な場合はヘルパーオブジェクトを作る。

### リテラルと変数
テストコードは具体的な値を取り扱うのでリテラル値を使うことが多くなる。  
その時、リテラル値について何らかの名前をつけておかないと、それが恣意的なプレースホルダーなのか境界値なのか不正値なのかなど、データの意味がとれなくなる。